controller:
  replicaCount: ${replica_count}
  
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
  
  %{ if provider_type == "vps-k3s" }
  # VPS k3s configuration
  kind: DaemonSet
  hostNetwork: true
  hostPort:
    enabled: true
    ports:
      http: 80
      https: 443
  dnsPolicy: ClusterFirstWithHostNet
  service:
    type: NodePort
    nodePorts:
      http: 30080
      https: 30443
  %{ else }
  # Cloud provider configuration (AWS/GCP)
  service:
    type: LoadBalancer
    annotations:
      %{ if provider_type == "aws-eks" }
      service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
      service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled: "true"
      %{ endif }
      %{ if provider_type == "gcp-gke" }
      cloud.google.com/load-balancer-type: "External"
      %{ endif }
  %{ endif }
  
  admissionWebhooks:
    enabled: true
  
  config:
    use-forwarded-headers: "true"
    compute-full-forwarded-for: "true"
    use-proxy-protocol: "false"

